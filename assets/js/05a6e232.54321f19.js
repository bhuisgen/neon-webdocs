"use strict";(self.webpackChunkneon_webdocs=self.webpackChunkneon_webdocs||[]).push([[7166],{2251:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var t=i(5893),r=i(1151);const s={displayed_sidebar:"docsSidebar",hide_table_of_contents:!0},l="React",o={id:"neon/samples/react/index",title:"React",description:"Serving a React application have some prerequisites to support Neon features like full rendering and server state.",source:"@site/docs/neon/samples/react/index.md",sourceDirName:"neon/samples/react",slug:"/neon/samples/react/",permalink:"/neon-webdocs/neon/samples/react/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{displayed_sidebar:"docsSidebar",hide_table_of_contents:!0},sidebar:"docsSidebar",previous:{title:"Hugo",permalink:"/neon-webdocs/neon/samples/hugo/"}},d={},c=[{value:"Build",id:"build",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Improve",id:"improve",level:2}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"react",children:"React"}),"\n",(0,t.jsx)(n.p,{children:"Serving a React application have some prerequisites to support Neon features like full rendering and server state."}),"\n",(0,t.jsx)(n.p,{children:"Here are the requisites:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Your application must be ready for server-side execution"}),"\n",(0,t.jsxs)(n.li,{children:["A specific server bundle of your application must be build with a tool like ",(0,t.jsx)(n.code,{children:"esbuild"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Both the server and the client bundle must be used: the server bundle is executed by the ",(0,t.jsx)(n.code,{children:"app"})," handler and the\nclient bundle is served to clients by the ",(0,t.jsx)(n.code,{children:"static"})," middleware."]}),"\n",(0,t.jsx)(n.li,{children:"Verify that the server bundle doesn't execute any browser APIs as the server VM is only able to execute vanilla JS. In\npractice, any code parts requiring browser APIs/objects must be removed."}),"\n",(0,t.jsxs)(n.li,{children:["The index HTML must include the script tag of the client bundle and it should match to the vallue of option\n",(0,t.jsx)(n.code,{children:"container"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Serving a React client rendered application is still possible like any alternate web servers."})}),"\n",(0,t.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,t.jsx)(n.p,{children:"TODO"}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="neon.yaml"',children:"server:\n  listeners:\n    default:\n      tls:\n        listenAddr: 0.0.0.0\n        listenPort: 443\n        caFile: ca.pem\n        certFile: cert.pem\n        keyFile: key.pem\n  sites:\n    default:\n      listeners:\n        - default\n      routes:\n        default:\n          middlewares:\n            logger:\n\n            compress:\n              level: -1\n\n            static:\n              path: public/\n              index: true\n          handler:\n            app:\n              index: dist/index.html\n              bundle: dist/bundle.js\n              cache: true\n              cacheTTL: 3600\n"})}),"\n",(0,t.jsx)(n.h2,{id:"improve",children:"Improve"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Define the static resources for your static content"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Define the dynamic resources for your dynamic content"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Define the resource loading rules"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Define all the application routes"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Test the application rendering"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Add the robots handler to generate your robots.txt"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Add the sitemap handler to generate your sitemap"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Test the robots.txt and sitemap rendering"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Improve the cache settings"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Define the rendering rules to prerender your application"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Test your application rendering performance with lighthouse"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Test your application after server restart"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Move to production!"}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>l});var t=i(7294);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);