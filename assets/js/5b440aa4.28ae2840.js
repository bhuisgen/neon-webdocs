"use strict";(self.webpackChunkneon_webdocs=self.webpackChunkneon_webdocs||[]).push([[7053],{6653:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>c,frontMatter:()=>t,metadata:()=>l,toc:()=>o});var s=i(5893),r=i(1151);const t={toc_max_heading_level:2},d="Site",l={id:"neon/configuration/server/sites/site/index",title:"Site",description:"A site is a website hosted by the server instance.",source:"@site/docs/neon/configuration/server/sites/site/index.md",sourceDirName:"neon/configuration/server/sites/site",slug:"/neon/configuration/server/sites/site/",permalink:"/neon-webdocs/neon/configuration/server/sites/site/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{toc_max_heading_level:2},sidebar:"docsSidebar",previous:{title:"Overview",permalink:"/neon-webdocs/neon/configuration/server/sites/overview/"},next:{title:"compress",permalink:"/neon-webdocs/neon/configuration/server/sites/modules/middlewares/compress/"}},a={},o=[{value:"Example configuration",id:"example-configuration",level:2},{value:"Directives",id:"directives",level:2},{value:"<code>listeners</code>",id:"listeners",level:3},{value:"<code>hosts</code>",id:"hosts",level:3},{value:"<code>routes</code>",id:"routes",level:3},{value:"<code>middlewares</code>",id:"routes-middlewares",level:4},{value:"<code>handler</code>",id:"routes-handler",level:4}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"site",children:"Site"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"site"})," is a website hosted by the server instance."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#example-configuration",children:"Example configuration"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#directives",children:"Directives"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#listeners",children:(0,s.jsx)(n.code,{children:"listeners"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#hosts",children:(0,s.jsx)(n.code,{children:"hosts"})})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#routes",children:(0,s.jsx)(n.code,{children:"routes"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#routes-middlewares",children:(0,s.jsx)(n.code,{children:"middlewares"})})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#routes-handler",children:(0,s.jsx)(n.code,{children:"handler"})})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-configuration",children:"Example configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"server:\n  sites:\n    main:\n      listeners:\n        - default\n      routes:\n        default:\n          middlewares:\n            static:\n              path: dist/app/static\n          handler:\n            app:\n              index: dist/app/index.html\n              bundle: dist/app/bundle.js\n    admin:\n      listeners:\n        - default\n      hosts:\n        - admin.example.org\n      routes:\n        default:\n          middlewares:\n            static:\n              path: dist/admin/static\n          handler:\n            app:\n              index: dist/admin/index.html\n              bundle: dist/admin/bundle.js\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Two sites are defined using the same network listener ",(0,s.jsx)(n.code,{children:"default"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The first site ",(0,s.jsx)(n.code,{children:"main"})," is used by default as no host is specified."]}),"\n",(0,s.jsxs)(n.li,{children:["The second site ",(0,s.jsx)(n.code,{children:"admin"})," defines a host to limit its access to the only host ",(0,s.jsx)(n.code,{children:"admin.example.org"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"directives",children:"Directives"}),"\n",(0,s.jsx)(n.h3,{id:"listeners",children:(0,s.jsx)(n.code,{children:"listeners"})}),"\n",(0,s.jsx)(n.p,{children:"Syntax:         listeners:\nType:           list\nItem type:      string"}),"\n",(0,s.jsx)(n.p,{children:"This list defines the listeners used by the site."}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"At least one listener is required."})}),"\n",(0,s.jsx)(n.h3,{id:"hosts",children:(0,s.jsx)(n.code,{children:"hosts"})}),"\n",(0,s.jsx)(n.p,{children:"Syntax:         hosts:\nType:           list\nItem type:      string\nDefault:        -"}),"\n",(0,s.jsx)(n.p,{children:"This list defines the hosts used by the site."}),"\n",(0,s.jsx)(n.p,{children:"Omitting this option marks the current site as the default site of the instance."}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Only one site is allowed to be defined as default. Non-default sites must have this option defined."})}),"\n",(0,s.jsx)(n.h3,{id:"routes",children:(0,s.jsx)(n.code,{children:"routes"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    Syntax:         routes:\n    Type:           map\n    Map key:        string\n    Map value:      object\n    Default:        -\n"})}),"\n",(0,s.jsx)(n.p,{children:"This map defines each site routes as a pair route name / configuration:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'routes:\n  default:\n    middlewares:\n      # ...\n    handler:\n      # ...\n  "/route1":\n    middlewares:\n      # ...\n    handler:\n      # ...\n'})}),"\n",(0,s.jsx)(n.p,{children:"Depending of its name a route can have different types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"an internal route triggers a specific behavior."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["a regular route processes the request if its request path and the ",(0,s.jsx)(n.em,{children:"route path"})," are matching."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The route selection order may vary depending on which internal route may or may not have a higher priority."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Internal routes"})}),"\n",(0,s.jsx)(n.p,{children:"The available internal routes are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"default"}),": the configuration of this route is applied if no regular route matching the request exists. Its priority is\nlower than regular routes."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Regular routes"})}),"\n",(0,s.jsx)(n.p,{children:"The regular routes have these naming conventions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["it must start with a ",(0,s.jsx)(n.code,{children:"/"})," character."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["if no trailing ",(0,s.jsx)(n.code,{children:"/"})," is present, the route matches strictly the request path."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["if a trailing ",(0,s.jsx)(n.code,{children:"/"})," is present, the route will match all children of this path, excepted if another regular route is\nalready defined."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["The regular route ",(0,s.jsx)(n.strong,{children:"/"})," is used to override the inherited configuration from the internal route ",(0,s.jsx)(n.code,{children:"default"}),". If no other regular route exists, the regular route ",(0,s.jsx)(n.strong,{children:"/"})," precedes the ",(0,s.jsx)(n.code,{children:"default"})," internal route."]})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"Keep your routing configuration ordered like this:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"first the internal routes starting from the lowest priorities to higher, next the regular routes ordered by names."}),"\n",(0,s.jsx)(n.li,{children:"each regular routes names should be delimited by quotes."}),"\n",(0,s.jsx)(n.li,{children:"each route should define first its middlewares chain and second its handler."}),"\n"]})]}),"\n",(0,s.jsx)(n.h4,{id:"routes-middlewares",children:(0,s.jsx)(n.code,{children:"middlewares"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    Syntax:         middlewares:\n    Type:           map\n    Map key:        string\n    Map value:      object\n    Default:        -\n"})}),"\n",(0,s.jsx)(n.p,{children:"This map defines the middlewares of the given route."}),"\n",(0,s.jsxs)(n.p,{children:["Each middleware will be executed one after the other composing ",(0,s.jsx)(n.em,{children:"the middlewares chain"}),". The middlewares chain of the default route is commonly called ",(0,s.jsx)(n.em,{children:"the default middlewares chain"}),"."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'routes:\n  "/path":\n    middlewares:\n      middleware1:\n        # middleware configuration\n      middleware2:\n        # middleware configuration\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"If a regular route defines no middleware, the default route middlewares chain will be used."})}),"\n",(0,s.jsx)(n.h4,{id:"routes-handler",children:(0,s.jsx)(n.code,{children:"handler"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    Syntax:         handler:\n    Type:           object\n    Default:        -\n"})}),"\n",(0,s.jsx)(n.p,{children:"This object defines the handler of the given route."}),"\n",(0,s.jsx)(n.p,{children:"The handler will be executed after the middlewares chain."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'routes:\n  default:\n    middlewares:\n      # default middlewares chain\n    handler:\n      # default handler\n\n  "/path":\n    middlewares:\n      middleware1:\n        # middleware configuration\n      middleware2:\n        # middleware configuration\n    handler:\n      handler1:\n        # handler configuration\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If a regular route defines no handler, the default route handler will be used."}),"\n",(0,s.jsx)(n.li,{children:"If the default route defines no handler, an empty HTTP 404 response will be returned."}),"\n"]})})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>d});var s=i(7294);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);